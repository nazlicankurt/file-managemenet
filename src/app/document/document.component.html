

<div fxLayoutAlign="center center"
     fxFill>
  <div class="inv-table-container mat-elevation-z8"
       fxFlex="40"
       *ngIf="dataSource.data?.length; else emptyState">
    <button mat-fab
            color="primary"
            class="inv-btn-add"
            (click)="openItemDialog()"
            data-id="btn-new-item">
      <mat-icon>add</mat-icon>
    </button>
    <table mat-table
           class="w-100"
           matSort
           aria-label="Elements"
           data-id="table-items"
           [dataSource]="dataSource">

      <!-- Name Column -->
      <ng-container matColumnDef="id">
        <th mat-header-cell
            *matHeaderCellDef
            mat-sort-header>ID
        </th>
        <td mat-cell
            *matCellDef="let row">{{row.id}}</td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell
            *matHeaderCellDef
            mat-sort-header>Name
        </th>
        <td mat-cell
            *matCellDef="let row">{{row.name}}</td>
      </ng-container>

      <!-- LastUpdatedAt Column -->
      <ng-container matColumnDef="lastUpdatedAt">
        <th mat-header-cell
            *matHeaderCellDef
            mat-sort-header>Last Updated
        </th>
        <td mat-cell
            *matCellDef="let row">{{row.lastUpdatedAt | date:'short'}}</td>
      </ng-container>

      <!-- Amount Column -->
      <ng-container matColumnDef="invoiceNumber">
        <th mat-header-cell
            *matHeaderCellDef
            arrowPosition="before"
            mat-sort-header
            class="text-right">
          Amount
        </th>
        <td mat-cell
            *matCellDef="let row"
            class="text-right">
          <button mat-icon-button
                  color="warn"
                  matTooltip="Out of stock!"
                  data-id="btn-out-of-stock"
                  *ngIf="row.invoiceNumber <= 0">
            <mat-icon>priority_high</mat-icon>
          </button>
          <span>{{row.amount}}</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell
            *matHeaderCellDef></th>
        <td mat-cell
            *matCellDef="let row">
          <div fxLayoutAlign="end center">

            <button mat-icon-button
                    (click)="removeItem(row.id)"
                    data-id="btn-remove">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row
          *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row
          *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <mat-paginator #paginator
                   [length]="dataSource?.data?.length"
                   [pageIndex]="0"
                   [pageSize]="10"
                   [pageSizeOptions]="[5, 10, 20]">
    </mat-paginator>
  </div>
</div>


<ng-template #emptyState>
  <div fxLayout="column"
       fxLayoutAlign="center stretch"
       fxLayoutGap="20px"
       data-id="empty-state-banner">
    <div fxLayout="row"
         fxLayoutAlign="center center">
      <img fxFlex="70"
           src="assets/box.svg"
           alt="There are no items yet"
           class="w-100">
    </div>
    <h1 class="mat-h1 mat-body-1">It looks like your <strong> Invoice Documentation</strong> is empty!</h1>
    <div fxLayoutAlign="center center">
      <button mat-raised-button
              color="primary"
              (click)="openItemDialog()"
              data-id="btn-initial-item">
        ADD ITEM
      </button>

    </div>

  </div>

</ng-template>
